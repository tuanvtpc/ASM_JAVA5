<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Giỏ hàng</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="/images/static/css/style.css" />
    <style>
     .checkout-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f9f9f9;
	}
	
	.checkout-section {
	    margin-bottom: 20px;
	    padding: 15px;
	    border: 1px solid #ddd;
	    border-radius: 8px;
	    background-color: #fff;
	}
	
	h2 {
	    font-size: 1.5em;
	    margin-bottom: 10px;
	}
	
	.form-group {
	    margin-bottom: 15px;
	}
	
	label {
	    display: block;
	    margin-bottom: 5px;
	}
	
	input[type="text"],
	input[type="tel"],
	textarea,
	select {
	    width: 100%;
	    padding: 10px;
	    border: 1px solid #ccc;
	    border-radius: 4px;
	}
	
	textarea {
	    resize: vertical;
	}
	
	/* Danh sách sản phẩm */
	.product-list {
	    display: flex;
	    flex-direction: column;
	}
	
	.product-item {
	    display: flex;
	    align-items: center;
	    margin-bottom: 8px;
	    padding: 10px;
	    border: 1px solid #ddd;
	    border-radius: 5px;
	    background-color: #fff;
	}
	
	.product-item img {
	    width: 80px; /* Giảm kích thước ảnh */
	    height: auto;
	    margin-right: 8px;
	    border-radius: 5px;
	}
	
	.product-info {
	    flex-grow: 1;
	}
	
	.product-info h4 {
	    font-size: 1em; /* Giảm kích thước tiêu đề */
	    margin-bottom: 5px;
	}
	
	.product-info p {
	    font-size: 0.9em; /* Giảm kích thước chữ */
	    margin: 3px 0;
	}
	
	.total-price {
	    font-size: 1.1em;
	    font-weight: bold;
	    margin-top: 8px;
	}
	
	/* Phương thức thanh toán */
	.payment-methods label {
	    display: block;
	    margin-bottom: 10px;
	    font-size: 1em;
	}
	
	.payment-methods input[type="radio"] {
	    margin-right: 5px;
	}
	
	/* Nút đặt hàng */
	.btn-checkout {
	    display: inline-block;
	    padding: 10px 20px;
	    background-color: #28a745; /* Màu xanh lá cây */
	    color: white;
	    border: none;
	    border-radius: 4px;
	    font-size: 1.2em;
	    cursor: pointer;
	    text-align: center;
	    transition: background-color 0.3s;
	}
	
	.btn-checkout:hover {
	    background-color: #218838; /* Màu xanh đậm hơn khi hover */
	}
	
	.btn-checkout:disabled {
	    background-color: #ccc; /* Màu xám khi vô hiệu hóa */
	    cursor: not-allowed;
	}
	
	/* Responsive Design */
	@media (max-width: 600px) {
	    .checkout-container {
	        padding: 10px;
	    }
	
	    .checkout-section {
	        padding: 10px;
	    }
	
	    .product-item {
	        flex-direction: column;
	        align-items: flex-start;
	    }
	
	    .product-item img {
	        margin-bottom: 10px;
	    }
	
	    .btn-checkout {
	        width: 100%;
	    }
	}
     
    </style>
  </head>
  <body>
    <header>
	    <div class="menu-main">
	      <div class="contact-numbers">HOTLINE: 1900 633 045 | 0865 160 360</div>
	      <div class="nav-items">
	      	<a href="/profile" class="customeText">
	            <i class="fa-solid fa-user" style="color: #4f4f4f"></i>Tài khoản
	        </a>
	        <a href="/shopping-cart" class="customeText">
	            <i class="fa-solid fa-cart-shopping" style="color: #4f4f4f"></i>Giỏ hàng
	        </a>
	        <a href="/login" class="customeText">
	        	<i class="fa-solid fa-right-to-bracket" style="color: #4f4f4f"></i>Đăng nhập
	        </a>
	      </div>
	    </div>
	  </header>

    <div class="header-container">
      <div class="social-media">
        <a href="">
          <i class="fa-brands fa-facebook fa-2xl" style="color: #3b5998"></i>
        </a>
        <a href="">
          <i class="fa-brands fa-twitter fa-2xl" style="color: #38a1f3"></i>
        </a>
        <a href="">
          <i class="fa-brands fa-instagram fa-2xl" style="color: #cd486b"></i>
        </a>
      </div>

      <div class="logo-shop">
        <a href="index.html">
          <img
            src="https://www.flowercorner.vn/image/catalog/common/shop-hoa-tuoi-flowercorner-logo.png.webp"
            title="FlowerCorner.vn - Shop hoa tươi"
            alt="FlowerCorner.vn - Shop hoa tươi"
            class="img-fluid"
            width="300"
            height="62"
          />
        </a>
      </div>

      <div class="purchase-bar">
        <div class="search-bar">
          <input type="text" placeholder="Tìm kiếm" class="text-control" />
          <button type="button" class="search-button">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </div>

        <div class="buy-bar">
          <div class="buy-icon" onclick="toggleCartDropdown()">
            <button type="button" class="btn btn-inverse btn-block">
              <i class="fa-solid fa-bag-shopping"></i>
            </button>
            <span id="cart-count" class="mini-cart-count">0</span>
          </div>
          <div id="cart-dropdown">
            <div id="cart-items"></div>
            <div id="cart-total"></div>
            <div class="cart-actions">
              <a href="checkout.html" class="">
                <i class="fa-solid fa-cart-shopping"></i> Giỏ hàng
              </a>
              <span class="line-cart">|</span>
              <a href="checkout.html" class="">
                <i class="fa-solid fa-share"></i> Thanh toán
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-menu">
      <nav class="nav-menu">
        <ul class="nav-links">
          <li class="dropdown">
            <a href="hoa-sinh-nhat.html" class="drop">HOA SINH NHẬT</a>
            <ul class="dropdown-menu">
              <li><a href="#">HOA SINH NHẬT SANG TRỌNG</a></li>
              <li><a href="#">HOA SINH NHẬT GIÁ RẺ</a></li>
              <li><a href="#">HOA TẶNG SINH NHẬT NGƯỜI YÊU</a></li>
              <li><a href="#">HOA TẶNG SINH NHẬT MẸ</a></li>
              <li><a href="#">HOA TẶNG SINH NHẬT BẠN</a></li>
              <li><a href="#">LẴNG HOA TẶNG SINH NHẬT</a></li>
              <li><a href="#">HOA HỒNG TẶNG SINH NHẬT</a></li>
              <li><a href="#">GIỎ HOA SINH NHẬT</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="hoa-khai-truong.html" class="drop">HOA KHAI TRƯƠNG</a>
            <ul class="dropdown-menu">
              <li><a href="#">HOA KHAI TRƯƠNG ĐỂ BÀN</a></li>
              <li><a href="#">KỆ HOA KHAI TRƯƠNG</a></li>
              <li><a href="#">KỆ HOA KHAI TRƯƠNG HIỆN ĐẠI</a></li>
              <li><a href="#">HOA KHAI TRƯƠNG GIÁ RẺ</a></li>
              <li><a href="#">LẴNG HOA 2 TẦNG MỪNG KHAI TRƯƠNG</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="lan-ho-diep.html" class="drop">LAN HỒ ĐIỆP</a>
            <ul class="dropdown-menu">
              <li><a href="#">LAN HỒ ĐIỆP MINI</a></li>
              <li><a href="#">LAN HỒ ĐIỆP VÀNG</a></li>
              <li><a href="#">LAN HỒ ĐIỆP TRẮNG</a></li>
              <li><a href="#">LAN HỒ ĐIỆP TÍM</a></li>
              <li><a href="#">CHẬU LAN HỒ ĐIỆP 3 CÀNH</a></li>
              <li><a href="#">CHẬU LAN HỒ ĐIỆP 5 CÀNH</a></li>
              <li><a href="#">CHẬU LAN HỒ ĐIỆP 10 CÀNH</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#" class="drop">CHỦ ĐỀ</a>
            <ul class="dropdown-menu">
              <li><a href="#">HOA CHÚC MỪNG</a></li>
              <li><a href="#">HOA CƯỚI CẦM TAY</a></li>
              <li><a href="#">HOA TANG LỄ - HOA CHIA BUỒN</a></li>
              <li><a href="#">HOA TÌNH YÊU</a></li>
              <li><a href="#">HOA VALENTINE</a></li>
              <li><a href="#">HOA KỶ NIỆM NGÀY CƯỚI</a></li>
              <li><a href="#">NGÀY CỦA MẸ</a></li>
              <li><a href="#">HOA CHÚC MỪNG 8-3</a></li>
              <li><a href="#">HOA CHÚC MỪNG 20-10</a></li>
              <li><a href="#">NGÀY NHÀ GIÁO VN</a></li>
              <li><a href="#">GIÁNG SINH</a></li>
              <li><a href="#">TẾT ÂM LỊCH</a></li>
              <li><a href="#">HOA TỐT NGHIỆP</a></li>
              <li><a href="#">HOA ĐỊNH KỲ</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#" class="drop">THIẾT KẾ</a>
            <ul class="dropdown-menu">
              <li><a href="#">BÓ HOA</a></li>
              <li><a href="#">LẴNG HOA</a></li>
              <li><a href="#">GIỎ HOA</a></li>
              <li><a href="#">KỆ HOA</a></li>
              <li><a href="#">BÌNH HOA</a></li>
              <li><a href="#">HỘP HOA</a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#" class="drop">HOA TƯƠI</a>
            <ul class="dropdown-menu">
              <li><a href="hoa-hong.html">HOA HỒNG</a></li>
              <li><a href="#">HOA BABY</a></li>
              <li><a href="#">HOA HƯỚNG DƯƠNG</a></li>
              <li><a href="#">HOA LAN HỒ ĐIỆP</a></li>
              <li><a href="#">HOA TULIP</a></li>
              <li><a href="#">HOA CÚC TANA</a></li>
              <li><a href="#">HOA THẠCH THẢO</a></li>
              <li><a href="#">HOA MẪU ĐƠN</a></li>
              <li><a href="#">CÚC MẪU ĐƠN</a></li>
              <li><a href="#">HOA CẨM TÚ CẦU</a></li>
              <li><a href="#">HOA LY</a></li>
              <li><a href="#">HOA SEN</a></li>
              <li><a href="#">HOA ĐỒNG TIỀN</a></li>
              <li><a href="#">HOA CẨM CHƯỚNG</a></li>
              <li><a href="#">HOA CÚC HỌA MI</a></li>
            </ul>
          </li>

          <li><a href="hoa-tuoi-giam-gia.html">HOA TƯƠI GIẢM 30%</a></li>
        </ul>
      </nav>
    </div>

    <div class="header-notice">
      ĐẶT HOA ONLINE - GIAO MIỄN PHÍ TP HCM & HÀ NỘI - GỌI NGAY 1900 633 045
      HOẶC 0865 160 360
    </div>

    <div class="checkout-container">
    	<div class="dropdown">
	        <div class="form-group">
	            <label for="addressSelect">Chọn thông tin nhận hàng:</label>
	            <select class="form-control" id="addressSelect" name="selectedAddressId" onchange="updateSelectedAddressId()">
	                <option value="">-- Chọn thông tin nhận hàng --</option>
	                <option th:each="address : ${addressList}" 
	                        th:value="${address.id}" 
	                        th:data-name="${address.name}">
	                    <span th:text="${address.name}"></span> -
	                    <span th:text="${address.phone}"></span> -
	                    <span th:text="${address.address}"></span>
	                </option>
	            </select>
	        </div>
	        <div>
	            <a class="btn btn-secondary" th:href="@{/user/add-address}">Thêm địa chỉ mới</a>
	        </div>
	        <input type="hidden" id="selectedAddressId" name="selectedAddressId" />
	    </div>
    	
		<div class="checkout-section">
		    <h2>Sản phẩm</h2>
		    <div class="product-list">
		    	<th:block th:each="item : ${items}">
		        <div class="product-item">
		            <img th:src="${'/images/' + item.product.images[0].imageName}" alt="Product Image" />
		            <div class="product-info">
		                <h4 th:text="${item.product.name}"></h4>
		                <p>Số lượng: <span  th:text="${item.quantity}">2</span></p>
		                <p>Giá:<span th:text="${item.product.price}"></span> VND</p>
		            </div>
		        </div>
	         </th:block>
		    </div>
		    <div class="total-price">
			    Tổng cộng: <span th:text="${#numbers.formatDecimal(totalPrice, 0, 'COMMA', 0, 'POINT')}"></span> VND
			</div>
		</div>

	
	    <div class="checkout-section">
        <h2>Phương thức thanh toán</h2>
        <div class="payment-methods">
            <label>
                <input type="radio" name="paymentMethod" value="0" checked onchange="updatePaymentMethod(this)" />
                Thanh toán khi nhận hàng (COD)
            </label>
            <label>
                <input type="radio" name="paymentMethod" value="1" onchange="updatePaymentMethod(this)" />
                Chuyển khoản ngân hàng
            </label>
            <label>
                <input type="radio" name="paymentMethod" value="2" onchange="updatePaymentMethod(this)" />
                Ví điện tử Momo
            </label>
        </div>
    </div>

    <form action="/user/checkout" method="post" onsubmit="return validateForm()">
        <input type="hidden" name="selectedAddressId" id="formSelectedAddressId" />
        <input type="hidden" name="paymentMethod" id="formPaymentMethod" />
        <button type="submit" class="btn-checkout">Đặt hàng</button>
    </form>
	</div>
    
    
    <footer>
      <div class="row">
        <div class="info-download">
          <img
            src="https://8384f55340.vws.vegacdn.vn/image/catalog/common/shop-hoa-tuoi-flowercorner-logo.png.webp"
            alt=""
          />
          Hotline: 1900 633 045 - 0865 160 360 Email: sales@flowercorner.vn
          <div class="download-app">
            <div class="qr-code">
              <img
                src="https://8384f55340.vws.vegacdn.vn/image/catalog/common/app/qr.png.webp"
                alt="quét để tải app FlowerCorner"
              />
            </div>
            <div class="store-link">
              Tải ứng dụng ngay!
              <div class="store-img">
                <img
                  src="https://8384f55340.vws.vegacdn.vn/image/catalog/common/app/appstore.png.webp"
                  alt="FlowerCorner trên app store"
                />
                <img
                  src="https://8384f55340.vws.vegacdn.vn/image/catalog/common/app/gplay.png.webp"
                  alt="FlowerCorner trên Google play"
                />
              </div>
            </div>
          </div>
          <div class="notice-bct">
            <img
              src="https://8384f55340.vws.vegacdn.vn/image/catalog/common/app/logoSaleNoti.png.webp"
              alt=""
            />
          </div>
        </div>

        <div class="info-support">
        <h5>CHĂM SÓC KHÁCH HÀNG</h5>
        <p class="danhmuc">
          <a href="/introduce" class="color-grey">Giới thiệu</a>
        </p>
        <p class="danhmuc">
          <a href="/contact" class="color-grey">Liên Hệ</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Chính Sách Vận Chuyển</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Câu Hỏi Thường Gặp</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Hình Thức Thanh Toán</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Bảo Mật Thông Tin</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Chính Sách Hoàn Tiền</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Xử Lý Khiếu Nại</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Tại Sao Nên Chọn FlowerCorner.vn</a>
        </p>
        <p class="danhmuc">
          <a href="#" class="color-grey">Blog</a>
        </p>
      </div>

        <div class="info-media">
          <h5>THEO DÕI</h5>
          <div class="mxh">
            <p>
              <a href="#" class="color-grey">
                <i class="fa-brands fa-facebook"></i>
                Facebook</a
              >
            </p>
            <p>
              <a href="#" class="color-grey">
                <i class="fa-brands fa-twitter-square"></i>
                Twitter</a
              >
            </p>
            <p>
              <a href="#" class="color-grey">
                <i class="fa-brands fa-instagram"></i>
                Instagram</a
              >
            </p>
            <p>
              <a href="#" class="color-grey">
                <i class="fa-brands fa-linkedin"></i>
                Linkedin</a
              >
            </p>
            <p>
              <a href="#" class="color-grey">
                <i class="fa-brands fa-youtube"></i>
                Youtube</a
              >
            </p>
          </div>
        </div>

        <div class="info-address">
          <h5>SHOP HOA FLOWERCORNER</h5>
          <div class="address">
            <p>
              <strong>Cửa hàng chính</strong>:
              <a href="#" class="color-grey"
                >142 Nguyễn Văn Cừ, Phường Nguyễn Cư Trinh, Quận 1, TP.HCM</a
              >
            </p>
            <p>
              <strong>Chi nhánh TP.HCM</strong>:
              <a href="#" class="color-grey"
                >225/3 Nguyễn Đình Chiểu, Phường 5, Quận 3, TP.HCM</a
              >
            </p>
            <p>
              <strong>Chi nhánh Hà Nội</strong>:
              <a href="#" class="color-grey">65 Trần Phú, Ba Đình, Hà Nội</a>
            </p>
            <p>
              CÔNG TY TNHH THƯƠNG MẠI DỊCH VỤ ZAS
              <br />
              Mã số thuế: 0313630426
            </p>
          </div>
        </div>

        <div class="contact-bar">
          <div class="contact-numberphone">
            <i class="fa-solid fa-phone-volume" style="color: #ffffff"></i>
            <span>091 849 1941</span>
          </div>

          <div class="line"></div>

          <div class="contact-zalo">
            <img src="img/icons8-zalo-50 (1).png" alt="" />
            <span>Nhắn tin zalo</span>
          </div>

          <div class="line"></div>

          <div class="contact-numberphone">
            <i class="fa-solid fa-phone-volume" style="color: #ffffff"></i>
            <span>086 516 0360</span>
          </div>
        </div>
      </div>
    </footer>

    <script src="/images/static/js/nav-menu-fixed.js"></script>
    <script src="/images/static/js/cart-drop-down.js"></script>
    <script src="/images/static/js/cart-info.js"></script>
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script>
        function updateSelectedAddressId() {
            var addressSelect = document.getElementById("addressSelect");
            var selectedAddressId = addressSelect.value;
            document.getElementById("formSelectedAddressId").value = selectedAddressId;
        }
        
        function updatePaymentMethod(radio) {
            var paymentMethod = radio.value;
            document.getElementById("formPaymentMethod").value = paymentMethod;
        }

        function validateForm() {
            var addressSelect = document.getElementById("addressSelect");
            var paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');

            if (addressSelect.value === "") {
                alert("Vui lòng chọn địa chỉ nhận hàng.");
                return false;
            }

            if (!paymentMethod) {
                alert("Vui lòng chọn phương thức thanh toán.");
                return false;
            }

            // Đảm bảo input hidden cập nhật đúng giá trị
            document.getElementById("formPaymentMethod").value = paymentMethod.value;

            return true;
        }
    </script>
  </body>
</html>
